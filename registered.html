<!DOCTYPE html>
<html lang="en">
<head>
    <title>Master Roster | Abid Khan Hub</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #0f172a; color: white; padding: 40px; }
        .roster-card { background: #1e293b; border-radius: 12px; padding: 20px; border: 1px solid #334155; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        h2 { color: #3b82f6; letter-spacing: 1px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th { text-align: left; border-bottom: 2px solid #3b82f6; padding: 10px; color: #94a3b8; text-transform: uppercase; font-size: 12px; }
        td { padding: 12px; border-bottom: 1px solid #334155; font-size: 14px; }
        .badge { padding: 4px 10px; border-radius: 20px; font-size: 11px; font-weight: bold; text-transform: uppercase; }
        /* Style based on the 'role' values */
        .trainer { background: #8b5cf6; color: white; }
        .student { background: #10b981; color: white; }
        .whatsapp-btn { color: #25d366; text-decoration: none; font-weight: bold; display: flex; align-items: center; gap: 5px; }
        .whatsapp-btn:hover { text-decoration: underline; }
        small { color: #64748b; }
    </style>
</head>
<body>
    <div class="roster-card">
        <h2>MASTER HUB: REGISTERED MEMBERS</h2>
        <table id="rosterTable">
            <thead>
                <tr>
                    <th>Identity</th>
                    <th>Role</th>
                    <th>Dept/Focus</th>
                    <th>Contact</th>
                    <th>Initialization Date</th>
                </tr>
            </thead>
            <tbody id="tableBody">
                <tr><td colspan="5" style="text-align:center;">Loading Identity Records...</td></tr>
            </tbody>
        </table>
    </div>
    <script>
async function loadRoster() {
    try {
        // This calls your functions/api/get-registrations.js
        const response = await fetch('/api/get-registrations');
        const result = await response.json();
        
        if (result.success) {
            const tableBody = document.getElementById('rosterTable');
            tableBody.innerHTML = result.data.map(user => `
                <tr>
                    <td>${user.full_name}</td>
                    <td>${user.role}</td>
                    <td>${user.email}</td>
                    <td>${user.whatsapp}</td>
                </tr>
            `).join('');
        }
    } catch (err) {
        console.error("Failed to load Master Roster", err);
    }
}
window.onload = loadRoster;
</script>

</body>
</html>
